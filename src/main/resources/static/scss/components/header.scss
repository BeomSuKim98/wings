@use '../foundation' as f;
@use '../base/reset';

/* 헤더 컨테이너: 색/폰트는 CSS 변수로 제어 */
.header {
  margin-inline: auto;
  background: var(--bg-invert, var(--menu-bg));
  border-bottom: f.rem(2) solid var(--border-strong, var(--menu-border));
  color: var(--text-inverse, var(--menu-link));
  font-size: var(--fs-200); /* 14px 급 */
  line-height: 1.5;
  padding: 0 f.rem(16);

  .topMenu {
    position: relative;
    z-index: 10;

    &List {
      margin: 0;
      padding: 0;
      list-style: none;
      display: flex;
      align-items: center;
    }

    &ListItem {
      position: relative;
      padding: 0 f.rem(12);

      /* 1차 메뉴 텍스트(또는 링크) */
      > a,
      & {
        font-weight: 400;
        color: var(--text-inverse, var(--menu-link));
        text-decoration: none;
        cursor: default;
        font-size: var(--fs-200);
      }

      .visualPadding {
        position: absolute;
        left: 0;
        top: 100%;
        margin: 0;
        padding: f.rem(8) 0;
        list-style: none;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-0.625rem);
        transition:
          opacity 0.28s ease,
          transform 0.28s ease,
          visibility 0.28s;
        pointer-events: none;

        /* ▼ 2차 메뉴 */
        .topMenuDepth2 {
          background: var(--bg-invert, var(--menu-bg));
          border: 1px solid var(--border-strong, var(--menu-border));
          box-shadow: var(--shadow-lg, var(--menu-shadow));
          border-radius: f.rem(6);
          padding-inline-start: initial;
          width: 100%;
          margin-left: f.rem(5);

          &Item {
            margin: 0;

            &:hover > .topMenuDepth2ItemLink,
            &:focus-within > .topMenuDepth2ItemLink {
              background: var(--bg-surface, var(--menu-hover-bg));
              color: var(--text-primary, var(--menu-link-hover));
              border-radius: 0;
            }

            &:hover:first-child .topMenuDepth2ItemLink {
              border-radius: f.rem(6) f.rem(6) 0 0;
            }

            &:hover:last-child .topMenuDepth2ItemLink {
              border-radius: 0 0 f.rem(6) f.rem(6);
            }

            &:hover:not(:first-child):not(:last-child) .topMenuDepth2ItemLink {
              border-radius: 0;
            }

            &Link {
              display: block;
              padding: f.rem(10) f.rem(16);
              color: var(--text-inverse, var(--menu-link));
              text-decoration: none;
              white-space: nowrap;
              font-size: var(--fs-200);
            }
          }
        }
      }

      /* ▲ 호버/포커스 시 보여주기 */
      &:hover > .visualPadding,
      &:focus-within > .visualPadding {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        pointer-events: auto;
      }
    }
  }
}

/* 모션 민감 사용자 배려 */
@include f.reduce-motion {
  .header .topMenu .topMenuListItem .topMenuDepth2 {
    transition: none;
    transform: none;
  }
}

/* ====== 반응형 ====== */
/* ≤ 320px */
@include f.mq($to: xs) {
  html { font-size: 12px; } /* 필요 시 유지 */
  .header { padding: 0 f.rem(12); }

  .header .topMenuListItem:last-child .visualPadding { right: 0; left: auto; }
  .header .topMenu .topMenuList { flex-wrap: wrap; }
  .header .topMenu .topMenuListItem { padding: 0 f.rem(8); }
}

/* 320px ~ 1080px */
@include f.mq($from: xs, $to: lg) {
  html { font-size: 14px; }

  .header .topMenuListItem:last-child .visualPadding { right: 0; left: auto; }
  .header .topMenu .topMenuListItem { padding: 0 f.rem(10); }
}

/* ≥ 1080px */
@include f.mq($from: lg) {
  html { font-size: 16px; }
  .header .topMenu .topMenuListItem { padding: 0 f.rem(12); }
  .header .topMenu .topMenuList { gap: f.rem(14); }
}
